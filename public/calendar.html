<!doctype html>
<html lang="ja">
<head>
  <script src="/js/auth.js"></script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>カレンダー</title>
  <link rel="stylesheet" href="/css/calendar.css" />
  <link rel="icon" href="data:," />
</head>
<body>

  <div class="cal-topbar">
    <h1 class="cal-title">カレンダー</h1>

    <div class="cal-controls">
      <button class="cal-mode-btn" data-mode="day"   id="modeDay"   type="button">日</button>
      <button class="cal-mode-btn" data-mode="week"  id="modeWeek"  type="button">週</button>
      <button class="cal-mode-btn" data-mode="2week" id="mode2Week" type="button">2週</button>
      <button class="cal-mode-btn" data-mode="month" id="modeMonth" type="button">月</button>
      <input type="date" class="cal-date" id="datePicker" />
    </div>

    <div class="cal-nav-row">
      <button class="cal-nav-btn" id="prevBtn" type="button">戻る</button>

      <div class="cal-nav-mid">
        <button class="cal-nav-btn" id="newBtn" type="button">新規作成</button>
        <p class="cal-error cal-error--center" id="errorText"></p>
      </div>

      <button class="cal-nav-btn" id="nextBtn" type="button">進む</button>
    </div>

    <div style="text-align:right; padding: 4px 12px; font-size:13px; color:#6b7280;">
      <span id="userName"></span>
      <button id="logoutBtn" style="margin-left:12px; padding:4px 12px; border:1px solid #e5e7eb; border-radius:8px; background:#fff; cursor:pointer; font-size:13px;">ログアウト</button>
    </div>
  </div>

  <div id="gridRoot">
    <div class="cal-grid-shell">
      <div class="cal-corner"></div>
      <div class="cal-days-header" id="daysHeader"></div>
      <div class="cal-time-col" id="timeCol"></div>
      <div class="cal-days-body" id="daysBody">
        <div class="cal-days-grid" id="daysGrid"></div>
      </div>
    </div>
  </div>

  <script src="/js/auth.js"></script>
  <script src="/js/calendar.js?v=20260224c"></script>
  <script>
    // ユーザー名表示
    const user = window.authUtils.getUser();
    if (user) {
      document.getElementById('userName').textContent = user.name + ' さん';
    }
    // ログアウト
    document.getElementById('logoutBtn').addEventListener('click', () => {
      window.authUtils.logout();
    });
  </script>
</body>
</html>